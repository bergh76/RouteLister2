function openNav(){document.getElementById("mySidenav").style.width="400px"}function closeNav(){document.getElementById("mySidenav").style.width="0"}function ShowProgress(){setTimeout(function(){var n=$(".download-spinner");n.show()},$(document).ready(function(){$(".download-spinner").fadeOut("slow")}))}function initMap(){directionsDisplay=new google.maps.DirectionsRenderer;directionsService=new google.maps.DirectionsService;navigator.geolocation.getCurrentPosition(function(n){var f=new google.maps.LatLng(n.coords.latitude,n.coords.longitude);map=new google.maps.Map(document.getElementById("map_canvas"),{mapTypeControl:!0,center:{lat:n.coords.latitude,lng:n.coords.longitude},zoom:13});var t=n.coords.latitude,i=n.coords.longitude,r=new google.maps.Geocoder,u=new google.maps.InfoWindow;new geocodeLatLng(r,map,u,t,i)})}function geocodeLatLng(n,t,i,r,u){var e,f,h=r+","+u,o=h.split(",",2),s={lat:parseFloat(o[0]),lng:parseFloat(o[1])};n.geocode({location:s},function(n,i){if(i==="OK")if(n[0]){t.setZoom(11);var r=new google.maps.Marker({position:s,map:t})}else window.alert("Destination kunde inte hittas");else window.alert("Ett fel uppstod: \n. V\u00e4nligen kontrollera destinationen:"+i);e=n[0].place_id;f=n[0].formatted_address;document.getElementById("origin-input").value=f;new AutocompleteDirectionsHandler(t,e,f)})}function AutocompleteDirectionsHandler(n){var r,u;this.map=n;this.originPlaceId=null;this.destinationPlaceId=null;this.travelMode="DRIVING";var t=document.getElementById("origin-input"),i=document.getElementById("destination-input"),f=document.getElementById("mode-selector");this.directionsService=new google.maps.DirectionsService;this.directionsDisplay=new google.maps.DirectionsRenderer;this.directionsDisplay.setMap(n);r=new google.maps.places.Autocomplete(t,{placeIdOnly:!0});u=new google.maps.places.Autocomplete(i,{placeIdOnly:!0});this.setupPlaceChangedListener(r,"ORIG");this.setupPlaceChangedListener(u,"DEST");this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(t);this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(i);this.map.controls[google.maps.ControlPosition.LEFT].push(f);new calculateAndDisplayRoute}function calculateAndDisplayRoute(){var n,t,i;directionsDisplay.setMap(map);directionsDisplay.setPanel(document.getElementById("right-panel"));n=function(){calculateAndDisplayRoute(directionsService,directionsDisplay)};document.getElementById("origin-input").addEventListener("change",n);document.getElementById("destination-input").addEventListener("change",n);t=document.getElementById("origin-input").value;i=document.getElementById("destination-input").value;directionsService.route({origin:t,destination:i,travelMode:"DRIVING"},function(n,t){t==="OK"?directionsDisplay.setDirections(n):window.alert("Ett fel uppstod: \n. V\u00e4nligen kontrollera destinationen:"+t)})}var external=function(){var t=function(n){n.stopPropagation();n.preventDefault()};return{stop:t}}(),map,directionsDisplay,directionsService;$(window).load(function(){$(".loader").fadeOut("slow").domManip.ready});$(".download-spinner").hide();AutocompleteDirectionsHandler.prototype.setupPlaceChangedListener=function(n,t){var i=this;n.bindTo("bounds",this.map);n.addListener("place_changed",function(){var r=n.getPlace();if(!r.place_id){window.alert("Du har inte valt n\u00e5gon adress.");return}t==="ORIG"?i.originPlaceId=r.place_id:i.destinationPlaceId=r.place_id;i.route()})};AutocompleteDirectionsHandler.prototype.route=function(){if(this.originPlaceId&&this.destinationPlaceId){var n=this;this.directionsService.route({origin:{placeId:this.originPlaceId},destination:{placeId:this.destinationPlaceId},travelMode:this.travelMode},function(t,i){i==="OK"?n.directionsDisplay.setDirections(t):window.alert("Ett fel uppstod: \n. V\u00e4nligen kontrollera destinationen:"+i)})}};